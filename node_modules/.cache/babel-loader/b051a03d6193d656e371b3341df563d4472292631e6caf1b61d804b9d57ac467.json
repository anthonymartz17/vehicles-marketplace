{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from \"firebase/auth\";\nimport apiProfile from \"../../helpers/apiProfile\";\nconst auth = getAuth();\nexport default {\n  namespaced: true,\n  state: {\n    user: null,\n    alert: {}\n  },\n  mutations: {\n    SET_USER(state, payload) {\n      state.user = payload;\n      console.log(payload);\n    },\n    SET_ALERT_MSG(state, payload) {\n      state.alert = payload;\n      console.log(state.alert, \"el test\");\n    },\n    SHOULD_SHOW_NAV(link) {\n      let showNav = true;\n      if (link == \"DASHBOARD\" && !this.isLoggedIn || link == \"JOIN US\" && this.isLoggedIn || link == \"SIGN OUT\" && !this.isLoggedIn) {\n        showNav = false;\n      }\n      return showNav;\n    }\n  },\n  actions: {\n    async signUp({\n      commit\n    }, {\n      email,\n      password\n    }) {\n      try {\n        let response = await createUserWithEmailAndPassword(auth, email, password);\n        return response.user;\n      } catch (error) {\n        throw error;\n      }\n    },\n    async signIn({\n      commit\n    }, {\n      email,\n      password\n    }) {\n      try {\n        let response = await signInWithEmailAndPassword(auth, email, password);\n\n        //before signing in, check if user is active by finding user by authentication id. Redirect to activation form if not active.\n        console.log(response.id, '');\n        const profile = await apiProfile.getProfileById(response.id);\n        console.log(profile, \" el perfil\");\n        if (profile) {\n          if (profile.active === 1) {\n            this.$router.push({\n              name: \"dashboard\"\n            });\n          } else {\n            this.$router.push({\n              name: \"activationForm\"\n            });\n          }\n        }\n        commit(\"SET_USER\", response.user);\n        console.log(response.user);\n      } catch (error) {\n        throw error;\n      }\n    }\n  },\n  getters: {}\n};","map":{"version":3,"names":["getAuth","createUserWithEmailAndPassword","signInWithEmailAndPassword","apiProfile","auth","namespaced","state","user","alert","mutations","SET_USER","payload","console","log","SET_ALERT_MSG","SHOULD_SHOW_NAV","link","showNav","isLoggedIn","actions","signUp","commit","email","password","response","error","signIn","id","profile","getProfileById","active","$router","push","name","getters"],"sources":["D:/Cursos programacion/Projects Only/vehicles-marketplace/src/store/modules/auth.js"],"sourcesContent":["import {\r\n\tgetAuth,\r\n\tcreateUserWithEmailAndPassword,\r\n\tsignInWithEmailAndPassword,\r\n} from \"firebase/auth\";\r\n\r\nimport apiProfile from \"../../helpers/apiProfile\";\r\nconst auth = getAuth();\r\n\r\nexport default {\r\n\tnamespaced: true,\r\n\tstate: {\r\n\t\tuser: null,\r\n\t\talert: {},\r\n\t},\r\n\tmutations: {\r\n\t\tSET_USER(state, payload) {\r\n\t\t\tstate.user = payload;\r\n\t\t\tconsole.log(payload);\r\n\t\t},\r\n\t\tSET_ALERT_MSG(state, payload) {\r\n\t\t\tstate.alert = payload;\r\n\t\t\tconsole.log(state.alert, \"el test\");\r\n\t\t},\r\n\t\tSHOULD_SHOW_NAV(link) {\r\n\t\t\tlet showNav = true;\r\n\t\t\tif (\r\n\t\t\t\t(link == \"DASHBOARD\" && !this.isLoggedIn) ||\r\n\t\t\t\t(link == \"JOIN US\" && this.isLoggedIn) ||\r\n\t\t\t\t(link == \"SIGN OUT\" && !this.isLoggedIn)\r\n\t\t\t) {\r\n\t\t\t\tshowNav = false;\r\n\t\t\t}\r\n\t\t\treturn showNav;\r\n\t\t},\r\n\t},\r\n\tactions: {\r\n\t\tasync signUp({ commit }, { email, password }) {\r\n\t\t\ttry {\r\n\t\t\t\tlet response = await createUserWithEmailAndPassword(\r\n\t\t\t\t\tauth,\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tpassword\r\n\t\t\t\t);\r\n\t\t\t\treturn response.user;\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthrow error;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync signIn({ commit }, { email, password }) {\r\n\t\t\ttry {\r\n\t\t\t\tlet response = await signInWithEmailAndPassword(auth, email, password);\r\n\r\n\t\t\t\t//before signing in, check if user is active by finding user by authentication id. Redirect to activation form if not active.\r\n\t\t\t\tconsole.log(response.id,'')\r\n\t\t\t\tconst profile = await apiProfile.getProfileById(response.id);\r\n\t\t\t\tconsole.log(profile, \" el perfil\");\r\n\t\t\t\tif (profile) {\r\n\t\t\t\t\tif (profile.active === 1) {\r\n\t\t\t\t\t\tthis.$router.push({ name: \"dashboard\" });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$router.push({ name: \"activationForm\" });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcommit(\"SET_USER\", response.user);\r\n\t\t\t\tconsole.log(response.user);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthrow error;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tgetters: {},\r\n};\r\n"],"mappings":";AAAA,SACCA,OAAO,EACPC,8BAA8B,EAC9BC,0BAA0B,QACpB,eAAe;AAEtB,OAAOC,UAAU,MAAM,0BAA0B;AACjD,MAAMC,IAAI,GAAGJ,OAAO,CAAC,CAAC;AAEtB,eAAe;EACdK,UAAU,EAAE,IAAI;EAChBC,KAAK,EAAE;IACNC,IAAI,EAAE,IAAI;IACVC,KAAK,EAAE,CAAC;EACT,CAAC;EACDC,SAAS,EAAE;IACVC,QAAQA,CAACJ,KAAK,EAAEK,OAAO,EAAE;MACxBL,KAAK,CAACC,IAAI,GAAGI,OAAO;MACpBC,OAAO,CAACC,GAAG,CAACF,OAAO,CAAC;IACrB,CAAC;IACDG,aAAaA,CAACR,KAAK,EAAEK,OAAO,EAAE;MAC7BL,KAAK,CAACE,KAAK,GAAGG,OAAO;MACrBC,OAAO,CAACC,GAAG,CAACP,KAAK,CAACE,KAAK,EAAE,SAAS,CAAC;IACpC,CAAC;IACDO,eAAeA,CAACC,IAAI,EAAE;MACrB,IAAIC,OAAO,GAAG,IAAI;MAClB,IACED,IAAI,IAAI,WAAW,IAAI,CAAC,IAAI,CAACE,UAAU,IACvCF,IAAI,IAAI,SAAS,IAAI,IAAI,CAACE,UAAW,IACrCF,IAAI,IAAI,UAAU,IAAI,CAAC,IAAI,CAACE,UAAW,EACvC;QACDD,OAAO,GAAG,KAAK;MAChB;MACA,OAAOA,OAAO;IACf;EACD,CAAC;EACDE,OAAO,EAAE;IACR,MAAMC,MAAMA,CAAC;MAAEC;IAAO,CAAC,EAAE;MAAEC,KAAK;MAAEC;IAAS,CAAC,EAAE;MAC7C,IAAI;QACH,IAAIC,QAAQ,GAAG,MAAMvB,8BAA8B,CAClDG,IAAI,EACJkB,KAAK,EACLC,QACD,CAAC;QACD,OAAOC,QAAQ,CAACjB,IAAI;MACrB,CAAC,CAAC,OAAOkB,KAAK,EAAE;QACf,MAAMA,KAAK;MACZ;IACD,CAAC;IACD,MAAMC,MAAMA,CAAC;MAAEL;IAAO,CAAC,EAAE;MAAEC,KAAK;MAAEC;IAAS,CAAC,EAAE;MAC7C,IAAI;QACH,IAAIC,QAAQ,GAAG,MAAMtB,0BAA0B,CAACE,IAAI,EAAEkB,KAAK,EAAEC,QAAQ,CAAC;;QAEtE;QACAX,OAAO,CAACC,GAAG,CAACW,QAAQ,CAACG,EAAE,EAAC,EAAE,CAAC;QAC3B,MAAMC,OAAO,GAAG,MAAMzB,UAAU,CAAC0B,cAAc,CAACL,QAAQ,CAACG,EAAE,CAAC;QAC5Df,OAAO,CAACC,GAAG,CAACe,OAAO,EAAE,YAAY,CAAC;QAClC,IAAIA,OAAO,EAAE;UACZ,IAAIA,OAAO,CAACE,MAAM,KAAK,CAAC,EAAE;YACzB,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC;cAAEC,IAAI,EAAE;YAAY,CAAC,CAAC;UACzC,CAAC,MAAM;YACN,IAAI,CAACF,OAAO,CAACC,IAAI,CAAC;cAAEC,IAAI,EAAE;YAAiB,CAAC,CAAC;UAC9C;QACD;QACAZ,MAAM,CAAC,UAAU,EAAEG,QAAQ,CAACjB,IAAI,CAAC;QACjCK,OAAO,CAACC,GAAG,CAACW,QAAQ,CAACjB,IAAI,CAAC;MAC3B,CAAC,CAAC,OAAOkB,KAAK,EAAE;QACf,MAAMA,KAAK;MACZ;IACD;EACD,CAAC;EACDS,OAAO,EAAE,CAAC;AACX,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}