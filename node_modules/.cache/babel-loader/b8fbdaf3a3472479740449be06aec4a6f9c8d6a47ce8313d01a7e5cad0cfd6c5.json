{"ast":null,"code":"import { mapGetters, mapState, mapMutations, mapActions } from \"vuex\";\nimport SearchBtn from \"./searchFieldMobile/SearchBtn.vue\";\nimport Multiselect from \"vue-multiselect\";\nimport MartzIcons from \"./martz-icons.vue\";\nexport default {\n  components: {\n    SearchBtn,\n    Multiselect,\n    MartzIcons\n  },\n  data() {\n    return {\n      searchLabels: [\"Condition\", \"Make\", \"Model\", \"Year\", \"Price\"]\n    };\n  },\n  methods: {\n    ...mapMutations(\"filterOptions\", [\"SET_MODEL_OPTIONS\"]),\n    ...mapActions(\"vehicles\", [\"updateFilters\", \"filterVehicles\"]),\n    fireSearch() {\n      this.filterVehicles();\n      this.$router.replace({\n        name: \"searchResults\"\n      });\n    },\n    searchFromType(type) {\n      this.filters.carType = type;\n    }\n  },\n  computed: {\n    ...mapState(\"vehicles\", [\"filters\"]),\n    ...mapGetters(\"vehicles\", [\"vehiclesList\"]),\n    filters: {\n      get() {\n        return this.$store.state.vehicles.filters;\n      },\n      set(newvalue) {\n        this.updateFilters(newvalue);\n      }\n    },\n    cartypes() {\n      return [...new Set(this.vehiclesList.map(x => x.carType.toLowerCase()))];\n    },\n    ...mapGetters(\"filterOptions\", [\"makeOptions\", \"modelOptions\", \"carConditionOptions\", \"yearOptions\", \"priceOptions\", \"transmissionOptions\", \"drivetrainOptions\", \"mileageOptions\", \"engineOptions\", \"colorOptions\"]),\n    //updates years fields to keep years from less than years to and viceversa\n    yearOptionsDynamic() {\n      let list = {};\n      if (this.filters.yearTo) {\n        list.from = this.yearOptions.from.filter(x => x <= this.filters.yearTo);\n      } else {\n        list.from = this.yearOptions.from;\n      }\n      if (this.filters.yearFrom) {\n        list.to = this.yearOptions.to.filter(x => x >= this.filters.yearFrom);\n      } else {\n        list.to = this.yearOptions.to;\n      }\n      return list;\n    },\n    priceOptionsDynamic() {\n      // controls from price is not greater than to price and to price not less than from price.\n      let list = {};\n      if (this.filters.priceTo) {\n        list.from = this.priceOptions.from.filter(x => x.fromNumType <= this.filters.priceTo);\n      } else {\n        list.from = this.priceOptions.from;\n      }\n      if (this.filters.priceFrom) {\n        list.to = this.priceOptions.to.filter(x => x.toNumType >= this.filters.priceFrom);\n      } else {\n        list.to = this.priceOptions.to;\n      }\n      return list;\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","mapState","mapMutations","mapActions","SearchBtn","Multiselect","MartzIcons","components","data","searchLabels","methods","fireSearch","filterVehicles","$router","replace","name","searchFromType","type","filters","carType","computed","get","$store","state","vehicles","set","newvalue","updateFilters","cartypes","Set","vehiclesList","map","x","toLowerCase","yearOptionsDynamic","list","yearTo","from","yearOptions","filter","yearFrom","to","priceOptionsDynamic","priceTo","priceOptions","fromNumType","priceFrom","toNumType"],"sources":["src/components/homeSearchForm.vue"],"sourcesContent":["<script>\r\nimport { mapGetters, mapState, mapMutations, mapActions } from \"vuex\";\r\nimport SearchBtn from \"./searchFieldMobile/SearchBtn.vue\";\r\nimport Multiselect from \"vue-multiselect\";\r\nimport MartzIcons from \"./martz-icons.vue\";\r\nexport default {\r\n\tcomponents: {\r\n\t\tSearchBtn,\r\n\t\tMultiselect,\r\n\t\tMartzIcons,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tsearchLabels: [\"Condition\", \"Make\", \"Model\", \"Year\", \"Price\"],\r\n\t\t};\r\n\t},\r\n\r\n\tmethods: {\r\n\t\t...mapMutations(\"filterOptions\", [\"SET_MODEL_OPTIONS\"]),\r\n\t\t...mapActions(\"vehicles\", [\"updateFilters\", \"filterVehicles\"]),\r\n\r\n\t\tfireSearch() {\r\n\t\t\tthis.filterVehicles();\r\n\t\t\tthis.$router.replace({ name: \"searchResults\" });\r\n\t\t},\r\n\t\tsearchFromType(type) {\r\n\t\t\tthis.filters.carType = type;\r\n\t\t},\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\t...mapState(\"vehicles\", [\"filters\"]),\r\n\t\t...mapGetters(\"vehicles\", [\"vehiclesList\"]),\r\n\t\tfilters: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.$store.state.vehicles.filters;\r\n\t\t\t},\r\n\t\t\tset(newvalue) {\r\n\t\t\t\tthis.updateFilters(newvalue);\r\n\t\t\t},\r\n\t\t},\r\n\t\tcartypes() {\r\n\t\t\treturn [\r\n\t\t\t\t...new Set(this.vehiclesList.map((x) => x.carType.toLowerCase())),\r\n\t\t\t];\r\n\t\t},\r\n\r\n\t\t...mapGetters(\"filterOptions\", [\r\n\t\t\t\"makeOptions\",\r\n\t\t\t\"modelOptions\",\r\n\t\t\t\"carConditionOptions\",\r\n\t\t\t\"yearOptions\",\r\n\t\t\t\"priceOptions\",\r\n\t\t\t\"transmissionOptions\",\r\n\t\t\t\"drivetrainOptions\",\r\n\t\t\t\"mileageOptions\",\r\n\t\t\t\"engineOptions\",\r\n\t\t\t\"colorOptions\",\r\n\t\t]),\r\n\r\n\t\t//updates years fields to keep years from less than years to and viceversa\r\n\t\tyearOptionsDynamic() {\r\n\t\t\tlet list = {};\r\n\t\t\tif (this.filters.yearTo) {\r\n\t\t\t\tlist.from = this.yearOptions.from.filter(\r\n\t\t\t\t\t(x) => x <= this.filters.yearTo\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tlist.from = this.yearOptions.from;\r\n\t\t\t}\r\n\t\t\tif (this.filters.yearFrom) {\r\n\t\t\t\tlist.to = this.yearOptions.to.filter((x) => x >= this.filters.yearFrom);\r\n\t\t\t} else {\r\n\t\t\t\tlist.to = this.yearOptions.to;\r\n\t\t\t}\r\n\t\t\treturn list;\r\n\t\t},\r\n\t\tpriceOptionsDynamic() {\r\n\t\t\t// controls from price is not greater than to price and to price not less than from price.\r\n\t\t\tlet list = {};\r\n\r\n\t\t\tif (this.filters.priceTo) {\r\n\t\t\t\tlist.from = this.priceOptions.from.filter(\r\n\t\t\t\t\t(x) => x.fromNumType <= this.filters.priceTo\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tlist.from = this.priceOptions.from;\r\n\t\t\t}\r\n\t\t\tif (this.filters.priceFrom) {\r\n\t\t\t\tlist.to = this.priceOptions.to.filter(\r\n\t\t\t\t\t(x) => x.toNumType >= this.filters.priceFrom\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tlist.to = this.priceOptions.to;\r\n\t\t\t}\r\n\r\n\t\t\treturn list;\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n<template>\r\n\t<form class=\"form\">\r\n\t\t<div :class=\"['field', { 'align-block': $route.name == 'searchResults' }]\">\r\n\t\t\t<label class=\"field-label\" for=\"condition\">Condition:</label>\r\n\t\t\t<multiselect\r\n\t\t\t\t@input=\"$route.name == 'searchResults' ? fireSearch() : null\"\r\n\t\t\t\tclass=\"dropdown\"\r\n\t\t\t\tv-model=\"filters.carCondition\"\r\n\t\t\t\t:options=\"carConditionOptions\"\r\n\t\t\t\t:searchable=\"false\"\r\n\t\t\t\t:show-labels=\"false\"\r\n\t\t\t\tplaceholder=\"New/Used\"\r\n\t\t\t></multiselect>\r\n\t\t</div>\r\n\r\n\t\t<div :class=\"['field', { 'align-block': $route.name == 'searchResults' }]\">\r\n\t\t\t<label class=\"field-label\" for=\"condition\">Make:</label>\r\n\t\t\t<multiselect\r\n\t\t\t\tclass=\"dropdown\"\r\n\t\t\t\tv-model=\"filters.make\"\r\n\t\t\t\t:options=\"makeOptions\"\r\n\t\t\t\t:searchable=\"false\"\r\n\t\t\t\t:show-labels=\"false\"\r\n\t\t\t\tplaceholder=\"All makes\"\r\n\t\t\t\t@input=\"\r\n\t\t\t\t\tfilters.model ? (filters.model = '') : null;\r\n\t\t\t\t\tsetModel({\r\n\t\t\t\t\t\tlist: vehiclesList,\r\n\t\t\t\t\t\tmake: filters.make,\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$route.name == 'searchResults' ? fireSearch() : null;\r\n\t\t\t\t\"\r\n\t\t\t></multiselect>\r\n\t\t</div>\r\n\r\n\t\t<div :class=\"['field', { 'align-block': $route.name == 'searchResults' }]\">\r\n\t\t\t<label for=\"condition\">Model:</label>\r\n\t\t\t<multiselect\r\n\t\t\t\t@input=\"$route.name == 'searchResults' ? fireSearch() : null\"\r\n\t\t\t\tclass=\"dropdown\"\r\n\t\t\t\tv-model=\"filters.model\"\r\n\t\t\t\t:options=\"modelOptions\"\r\n\t\t\t\t:searchable=\"false\"\r\n\t\t\t\t:show-labels=\"false\"\r\n\t\t\t\t:placeholder=\"\r\n\t\t\t\t\tfilters.make && filters.make !== 'All Makes'\r\n\t\t\t\t\t\t? `All ${filters.make}S`\r\n\t\t\t\t\t\t: 'All Models'\r\n\t\t\t\t\"\r\n\t\t\t></multiselect>\r\n\t\t</div>\r\n\t\t<div :class=\"['field', { 'align-block': $route.name == 'searchResults' }]\">\r\n\t\t\t<label for=\"condition\">Year:</label>\r\n\t\t\t<div\r\n\t\t\t\t:class=\"[\r\n\t\t\t\t\t'double-input-container',\r\n\t\t\t\t\t{ 'full-width': $route.name == 'searchResults' },\r\n\t\t\t\t]\"\r\n\t\t\t>\r\n\t\t\t\t<multiselect\r\n\t\t\t\t\t@input=\"$route.name == 'searchResults' ? fireSearch() : null\"\r\n\t\t\t\t\tclass=\"dropdown\"\r\n\t\t\t\t\tv-model=\"filters.yearFrom\"\r\n\t\t\t\t\t:options=\"yearOptionsDynamic.from\"\r\n\t\t\t\t\t:searchable=\"false\"\r\n\t\t\t\t\t:show-labels=\"false\"\r\n\t\t\t\t\tplaceholder=\"From\"\r\n\t\t\t\t></multiselect>\r\n\t\t\t\t<multiselect\r\n\t\t\t\t\t@input=\"$route.name == 'searchResults' ? fireSearch() : null\"\r\n\t\t\t\t\tclass=\"dropdown\"\r\n\t\t\t\t\tv-model=\"filters.yearTo\"\r\n\t\t\t\t\t:options=\"yearOptionsDynamic.to\"\r\n\t\t\t\t\t:searchable=\"false\"\r\n\t\t\t\t\t:show-labels=\"false\"\r\n\t\t\t\t\tplaceholder=\"To\"\r\n\t\t\t\t></multiselect>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div :class=\"['field', { 'align-block': $route.name == 'searchResults' }]\">\r\n\t\t\t<label for=\"condition\">Price:</label>\r\n\t\t\t<div\r\n\t\t\t\t:class=\"[\r\n\t\t\t\t\t'double-input-container',\r\n\t\t\t\t\t{ 'full-width': $route.name == 'searchResults' },\r\n\t\t\t\t]\"\r\n\t\t\t>\r\n\t\t\t\t<multiselect\r\n\t\t\t\t\t@input=\"$route.name == 'searchResults' ? fireSearch() : null\"\r\n\t\t\t\t\tclass=\"dropdown\"\r\n\t\t\t\t\tv-model=\"filters.priceFrom\"\r\n\t\t\t\t\t:options=\"priceOptionsDynamic.from.map((x) => x.fromNumType)\"\r\n\t\t\t\t\t:custom-label=\"\r\n\t\t\t\t\t\t(opt) => {\r\n\t\t\t\t\t\t\treturn priceOptionsDynamic.from.find((x) => x.fromNumType == opt)\r\n\t\t\t\t\t\t\t\t.fromFormatted;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\"\r\n\t\t\t\t\t:searchable=\"false\"\r\n\t\t\t\t\t:show-labels=\"false\"\r\n\t\t\t\t\tplaceholder=\"From\"\r\n\t\t\t\t></multiselect>\r\n\t\t\t\t<multiselect\r\n\t\t\t\t\t@input=\"$route.name == 'searchResults' ? fireSearch() : null\"\r\n\t\t\t\t\tclass=\"dropdown\"\r\n\t\t\t\t\tv-model=\"filters.priceTo\"\r\n\t\t\t\t\t:options=\"priceOptionsDynamic.to.map((x) => x.toNumType)\"\r\n\t\t\t\t\t:custom-label=\"\r\n\t\t\t\t\t\t(opt) => {\r\n\t\t\t\t\t\t\treturn priceOptionsDynamic.to.find((x) => x.toNumType == opt)\r\n\t\t\t\t\t\t\t\t.toFormatted;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\"\r\n\t\t\t\t\t:searchable=\"false\"\r\n\t\t\t\t\t:show-labels=\"false\"\r\n\t\t\t\t\tplaceholder=\"To\"\r\n\t\t\t\t></multiselect>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div v-show=\"$route.name !== 'searchResults'\" class=\"btn-container\">\r\n\t\t\t<div class=\"btn-search\" @click=\"fireSearch()\">Search</div>\r\n\t\t</div>\r\n\t</form>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.types-icon-container {\r\n\tmax-height: 100%;\r\n}\r\n// .typesCarList {\r\n// \theight: 100%;\r\n// \tlist-style: none;\r\n// \tdisplay: grid;\r\n// \tgrid-template-columns: 1fr 1fr;\r\n// \tgap: 2em;\r\n// \tflex-wrap: wrap;\r\n// \tflex: 2;\r\n\r\n// \tli {\r\n// \t\tflex: 1;\r\n// \t\tdisplay: flex;\r\n// \t\tflex-direction: column;\r\n// \t\talign-items: center;\r\n// \t\tjustify-content: center;\r\n// \t\ttransition: all 0.3s ease-in-out;\r\n// \t\t&:hover {\r\n// \t\t\tbackground: lighten($lightestDark, 35);\r\n// \t\t}\r\n\r\n// \t\tp {\r\n// \t\t\tfont: $font-text-bold;\r\n// \t\t\tpointer-events: none;\r\n// \t\t}\r\n// \t\t.routerlink {\r\n// \t\t\theight: 100%;\r\n// \t\t}\r\n// \t}\r\n// }\r\n.type-cars-icons {\r\n\tmax-width: 40%;\r\n\tpointer-events: none;\r\n}\r\n\r\n.search-type-wrapper {\r\n\tdisplay: none;\r\n}\r\n.search-title-desktop {\r\n\tborder-bottom: 2px solid $lightestDark;\r\n\tpadding-bottom: 0.5em;\r\n\tmargin-bottom: 1em;\r\n\tspan {\r\n\t\tcolor: $primary;\r\n\t}\r\n\tfont: $font-text-bold;\r\n}\r\n\r\n.search-vehicle {\r\n\tbox-shadow: 0px -2px 0px 0px $lightestDark;\r\n\tborder: 1px solid $lightestDark;\r\n\tpadding: 1em 0.5em;\r\n\tflex: 1;\r\n}\r\n.search-types {\r\n\tbox-shadow: 0px -2px 0px 0px $lightestDark;\r\n\tborder: 1px solid $lightestDark;\r\n\tpadding: 1em 0.5em;\r\n\tflex: 1;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n}\r\n.double-input-container {\r\n\tflex: 3;\r\n\tdisplay: flex;\r\n\tgap: 1em;\r\n}\r\n.full-width {\r\n\twidth: 100%;\r\n}\r\n.dropdown {\r\n\tflex: 3;\r\n}\r\n.carCondition {\r\n\t// display: none;\r\n}\r\n.field {\r\n\tmargin-bottom: 1em;\r\n\r\n\talign-items: center;\r\n\tfont: $font-mobile-m-bold;\r\n\r\n\tlabel {\r\n\t\tflex: 1;\r\n\t\t// color: $light;\r\n\t}\r\n\r\n\t// select {\r\n\t// \tflex: 3;\r\n\t// \tfont: $font-mobile-m-bold;\r\n\t// \tcolor: $dark;\r\n\t// \tpadding: 0.2em;\r\n\t// }\r\n}\r\n\r\n.align-block {\r\n\tflex-direction: column;\r\n\talign-items: flex-start;\r\n}\r\n.btn-container {\r\n\theight: 3em;\r\n}\r\n.price {\r\n\tdisplay: flex;\r\n}\r\n.year {\r\n\tdisplay: flex;\r\n}\r\n.btn {\r\n\twidth: 100%;\r\n\theight: 3em;\r\n\tmargin-block: 0.2em;\r\n\tfont: $font-text-bold;\r\n\ttext-align: center;\r\n}\r\n.btn-search {\r\n\tbackground: $primary;\r\n\theight: 100%;\r\n\toutline: none;\r\n\tborder: none;\r\n}\r\n.btn-advanceSearch {\r\n\tbackground: $dark;\r\n\tcolor: $primary;\r\n\tdisplay: grid;\r\n\tplace-items: center;\r\n}\r\n\r\n.form {\r\n\t@include breakpoint(tablet) {\r\n\t}\r\n\t@include breakpoint(desktop) {\r\n\t\t.search-type-wrapper {\r\n\t\t\tdisplay: flex;\r\n\t\t\tgap: 1em;\r\n\t\t\tmargin-block: 1em;\r\n\t\t}\r\n\t\t.field {\r\n\t\t\tdisplay: flex;\r\n\r\n\t\t\tlabel {\r\n\t\t\t\tcolor: $dark;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.btn-container {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: flex-end;\r\n\t\t\tmargin-top: 1em;\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n"],"mappings":"AACA,SAAAA,UAAA,EAAAC,QAAA,EAAAC,YAAA,EAAAC,UAAA;AACA,OAAAC,SAAA;AACA,OAAAC,WAAA;AACA,OAAAC,UAAA;AACA;EACAC,UAAA;IACAH,SAAA;IACAC,WAAA;IACAC;EACA;EACAE,KAAA;IACA;MACAC,YAAA;IACA;EACA;EAEAC,OAAA;IACA,GAAAR,YAAA;IACA,GAAAC,UAAA;IAEAQ,WAAA;MACA,KAAAC,cAAA;MACA,KAAAC,OAAA,CAAAC,OAAA;QAAAC,IAAA;MAAA;IACA;IACAC,eAAAC,IAAA;MACA,KAAAC,OAAA,CAAAC,OAAA,GAAAF,IAAA;IACA;EACA;EAEAG,QAAA;IACA,GAAAnB,QAAA;IACA,GAAAD,UAAA;IACAkB,OAAA;MACAG,IAAA;QACA,YAAAC,MAAA,CAAAC,KAAA,CAAAC,QAAA,CAAAN,OAAA;MACA;MACAO,IAAAC,QAAA;QACA,KAAAC,aAAA,CAAAD,QAAA;MACA;IACA;IACAE,SAAA;MACA,QACA,OAAAC,GAAA,MAAAC,YAAA,CAAAC,GAAA,CAAAC,CAAA,IAAAA,CAAA,CAAAb,OAAA,CAAAc,WAAA,KACA;IACA;IAEA,GAAAjC,UAAA,mBACA,eACA,gBACA,uBACA,eACA,gBACA,uBACA,qBACA,kBACA,iBACA,eACA;IAEA;IACAkC,mBAAA;MACA,IAAAC,IAAA;MACA,SAAAjB,OAAA,CAAAkB,MAAA;QACAD,IAAA,CAAAE,IAAA,QAAAC,WAAA,CAAAD,IAAA,CAAAE,MAAA,CACAP,CAAA,IAAAA,CAAA,SAAAd,OAAA,CAAAkB,MACA;MACA;QACAD,IAAA,CAAAE,IAAA,QAAAC,WAAA,CAAAD,IAAA;MACA;MACA,SAAAnB,OAAA,CAAAsB,QAAA;QACAL,IAAA,CAAAM,EAAA,QAAAH,WAAA,CAAAG,EAAA,CAAAF,MAAA,CAAAP,CAAA,IAAAA,CAAA,SAAAd,OAAA,CAAAsB,QAAA;MACA;QACAL,IAAA,CAAAM,EAAA,QAAAH,WAAA,CAAAG,EAAA;MACA;MACA,OAAAN,IAAA;IACA;IACAO,oBAAA;MACA;MACA,IAAAP,IAAA;MAEA,SAAAjB,OAAA,CAAAyB,OAAA;QACAR,IAAA,CAAAE,IAAA,QAAAO,YAAA,CAAAP,IAAA,CAAAE,MAAA,CACAP,CAAA,IAAAA,CAAA,CAAAa,WAAA,SAAA3B,OAAA,CAAAyB,OACA;MACA;QACAR,IAAA,CAAAE,IAAA,QAAAO,YAAA,CAAAP,IAAA;MACA;MACA,SAAAnB,OAAA,CAAA4B,SAAA;QACAX,IAAA,CAAAM,EAAA,QAAAG,YAAA,CAAAH,EAAA,CAAAF,MAAA,CACAP,CAAA,IAAAA,CAAA,CAAAe,SAAA,SAAA7B,OAAA,CAAA4B,SACA;MACA;QACAX,IAAA,CAAAM,EAAA,QAAAG,YAAA,CAAAH,EAAA;MACA;MAEA,OAAAN,IAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}