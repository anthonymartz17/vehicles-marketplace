{"ast":null,"code":"import VehiclesDisplay from \"../components/VehiclesDisplay.vue\";\n// import SideSearch from \"../components/sideBarSearch.vue\";\nimport Multiselect from \"vue-multiselect\";\nimport { mapMutations, mapState } from \"vuex\";\nimport FullSearchForm from \"../components/full-search-form.vue\";\nexport default {\n  components: {\n    VehiclesDisplay,\n    // SideSearch,\n    Multiselect,\n    FullSearchForm\n  },\n  data() {\n    return {\n      selectedSortId: \"\",\n      sortingOptions: [{\n        name: \"Lowest price first\",\n        id: \"lowestPrice\"\n      }, {\n        name: \"Highest price first\",\n        id: \"highestPrice\"\n      }, {\n        name: \"Highest mileage first\",\n        id: \"highestMileage\"\n      }, {\n        name: \"Lowest mileage first\",\n        id: \"lowestMileage\"\n      }, {\n        name: \"Newest first (by Car year)\",\n        id: \"newest\"\n      }, {\n        name: \"Oldest first (by Car year)\",\n        id: \"oldest\"\n      }]\n    };\n  },\n  methods: {\n    ...mapMutations(\"vehicles\", [\"SORT_VEHICLES\", \"UPDATE_FILTERS\", \"FILTER_VEHICLES\"]),\n    fireRemoveFilter(id) {\n      if (id == \"yearFrom\" || id == \"yearTo\") {\n        id = \"year\";\n      }\n      if (id == \"priceFrom\" || id == \"priceTo\") {\n        id = \"price\";\n      }\n      this.$refs.removeFilter.removeFilter({\n        id\n      });\n    },\n    fireClearFilters() {\n      this.$refs.removeFilter.clearFilters();\n    }\n  },\n  // \tcreated() {\n  // \t\tlet list = JSON.parse(localStorage.getItem('searchResults'))\n  // \t\tif (!list) {\n  // \t\tthis.FILTER_VEHICLES()\n  // \t}\n  // },\n  computed: {\n    ...mapState(\"vehicles\", [\"filters\"]),\n    appliedFilters() {\n      let list = Object.keys(this.filters).reduce((acc, key) => {\n        const value = this.filters[key];\n        if (value !== \"\" && value !== 0 && value !== null) {\n          acc[key] = value;\n        }\n        return acc;\n      }, {});\n      let finalList = Object.keys(list).map(one => {\n        const match = one.match(/[A-Z]/);\n        return one.split(match)[0];\n      });\n      return [...new Set(finalList)];\n    }\n  }\n};","map":{"version":3,"names":["VehiclesDisplay","Multiselect","mapMutations","mapState","FullSearchForm","components","data","selectedSortId","sortingOptions","name","id","methods","fireRemoveFilter","$refs","removeFilter","fireClearFilters","clearFilters","computed","appliedFilters","list","Object","keys","filters","reduce","acc","key","value","finalList","map","one","match","split","Set"],"sources":["src/views/SearchResults.vue"],"sourcesContent":["<script>\r\nimport VehiclesDisplay from \"../components/VehiclesDisplay.vue\";\r\n// import SideSearch from \"../components/sideBarSearch.vue\";\r\nimport Multiselect from \"vue-multiselect\";\r\nimport { mapMutations, mapState } from \"vuex\";\r\nimport FullSearchForm from \"../components/full-search-form.vue\";\r\n\r\nexport default {\r\n\tcomponents: {\r\n\t\tVehiclesDisplay,\r\n\t\t// SideSearch,\r\n\t\tMultiselect,\r\n\t\tFullSearchForm,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tselectedSortId: \"\",\r\n\t\t\tsortingOptions: [\r\n\t\t\t\t{ name: \"Lowest price first\", id: \"lowestPrice\" },\r\n\t\t\t\t{ name: \"Highest price first\", id: \"highestPrice\" },\r\n\t\t\t\t{ name: \"Highest mileage first\", id: \"highestMileage\" },\r\n\t\t\t\t{ name: \"Lowest mileage first\", id: \"lowestMileage\" },\r\n\t\t\t\t{ name: \"Newest first (by Car year)\", id: \"newest\" },\r\n\t\t\t\t{ name: \"Oldest first (by Car year)\", id: \"oldest\" },\r\n\t\t\t],\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\t...mapMutations(\"vehicles\", [\r\n\t\t\t\"SORT_VEHICLES\",\r\n\t\t\t\"UPDATE_FILTERS\",\r\n\t\t\t\"FILTER_VEHICLES\",\r\n\t\t]),\r\n\t\tfireRemoveFilter(id) {\r\n\t\t\tif (id == \"yearFrom\" || id == \"yearTo\") {\r\n\t\t\t\tid = \"year\";\r\n\t\t\t}\r\n\t\t\tif (id == \"priceFrom\" || id == \"priceTo\") {\r\n\t\t\t\tid = \"price\";\r\n\t\t\t}\r\n\t\t\tthis.$refs.removeFilter.removeFilter({ id });\r\n\t\t},\r\n\t\tfireClearFilters() {\r\n\t\t\tthis.$refs.removeFilter.clearFilters();\r\n\t\t},\r\n\t},\r\n\t// \tcreated() {\r\n\t// \t\tlet list = JSON.parse(localStorage.getItem('searchResults'))\r\n\t// \t\tif (!list) {\r\n\t// \t\tthis.FILTER_VEHICLES()\r\n\t// \t}\r\n\t// },\r\n\tcomputed: {\r\n\t\t...mapState(\"vehicles\", [\"filters\"]),\r\n\t\tappliedFilters() {\r\n\t\t\tlet list = Object.keys(this.filters).reduce((acc, key) => {\r\n\t\t\t\tconst value = this.filters[key];\r\n\t\t\t\tif (value !== \"\" && value !== 0 && value !== null) {\r\n\t\t\t\t\tacc[key] = value;\r\n\t\t\t\t}\r\n\t\t\t\treturn acc;\r\n\t\t\t}, {});\r\n\r\n\t\t\tlet finalList = Object.keys(list).map((one) => {\r\n\t\t\t\tconst match = one.match(/[A-Z]/);\r\n\t\t\t\treturn one.split(match)[0];\r\n\t\t\t});\r\n\r\n\t\t\treturn [...new Set(finalList)];\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n<template>\r\n\t<div class=\"resultsWrapper\">\r\n\t\t<div class=\"sort-filter-wrapper\">\r\n\t\t\t<div class=\"sort\">\r\n\t\t\t\t<multiselect\r\n\t\t\t\t\tv-model=\"selectedSortId\"\r\n\t\t\t\t\t:options=\"sortingOptions.map((x) => x.id)\"\r\n\t\t\t\t\t:custom-label=\"\r\n\t\t\t\t\t\t(opt) => {\r\n\t\t\t\t\t\t\tconst selected = sortingOptions.find((x) => x.id == opt);\r\n\t\t\t\t\t\t\treturn selected.name;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\"\r\n\t\t\t\t\t:searchable=\"false\"\r\n\t\t\t\t\t:show-labels=\"false\"\r\n\t\t\t\t\tplaceholder=\"Sort by:\"\r\n\t\t\t\t\t@input=\"SORT_VEHICLES(selectedSortId)\"\r\n\t\t\t\t></multiselect>\r\n\t\t\t</div>\r\n\t\t\t<h3 v-show=\"appliedFilters.length > 0\" class=\"small-sub-title\">\r\n\t\t\t\tFiltering by:\r\n\t\t\t</h3>\r\n\t\t\t<div class=\"applied-filters\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass=\"filter-applied\"\r\n\t\t\t\t\tv-for=\"filter in appliedFilters\"\r\n\t\t\t\t\t:key=\"filter\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<p>{{ filter }}</p>\r\n\t\t\t\t\t<button @click=\"fireRemoveFilter(filter)\">X</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h3\r\n\t\t\t\t\t@click=\"fireClearFilters\"\r\n\t\t\t\t\tv-show=\"appliedFilters.length > 0\"\r\n\t\t\t\t\tclass=\"small-sub-title clear-btn\"\r\n\t\t\t\t>\r\n\t\t\t\t\tClear filters\r\n\t\t\t\t</h3>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"sideSearch\">\r\n\t\t\t<!-- <SideSearch /> -->\r\n\t\t\t<FullSearchForm ref=\"removeFilter\" />\r\n\t\t</div>\r\n\r\n\t\t<div class=\"results\">\r\n\t\t\t<VehiclesDisplay />\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.clear-btn {\r\n\tpadding: 0.2em;\r\n\tborder: 1px solid $primary;\r\n\tcursor: pointer;\r\n}\r\n.resultsWrapper {\r\n\t@include desktop {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: 1fr 4fr;\r\n\t\tgrid-template-areas:\r\n\t\t\t\"sideSearch head head\"\r\n\t\t\t\"sideSearch results results\"\r\n\t\t\t\"sideSearch results results\";\r\n\t}\r\n}\r\n.sort-filter-wrapper {\r\n\tdisplay: none;\r\n\t@include desktop {\r\n\t\tgrid-area: head;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: baseline;\r\n\t\tpadding-inline: 0.5em;\r\n\t}\r\n}\r\n\r\n.sort {\r\n\tdisplay: none;\r\n\t@include desktop {\r\n\t\tdisplay: flex;\r\n\t\twidth: 15em;\r\n\t\tpadding: 0.2em;\r\n\t}\r\n}\r\n.applied-filters {\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n\tgap: 0.5em;\r\n}\r\n.small-sub-title {\r\n\tfont: $font-text-bold;\r\n\tcolor: $dark;\r\n\tmargin-bottom: 0.3em;\r\n}\r\n.filter-applied {\r\n\tbackground: $dark;\r\n\tcolor: $light;\r\n\tfont: $font-mobile-m-bold;\r\n\tborder: 1px solid;\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: baseline;\r\n\r\n\tp {\r\n\t\tflex: 1;\r\n\t\tpadding-inline: 0.2em;\r\n\t}\r\n\tbutton {\r\n\t\tcursor: pointer;\r\n\t\tbackground: $primary;\r\n\t\tcolor: $light;\r\n\t\tpadding: 0.2em;\r\n\t}\r\n}\r\n.results {\r\n\theight: 100%;\r\n\tposition: sticky;\r\n\ttop: 10px;\r\n}\r\n.sideSearch {\r\n\tdisplay: none;\r\n\t@include desktop {\r\n\t\tdisplay: block;\r\n\t\tgrid-area: sideSearch;\r\n\t\tbackground: $dark;\r\n\t\t// padding-inline: 1em;\r\n\t}\r\n}\r\n</style>\r\n"],"mappings":"AACA,OAAAA,eAAA;AACA;AACA,OAAAC,WAAA;AACA,SAAAC,YAAA,EAAAC,QAAA;AACA,OAAAC,cAAA;AAEA;EACAC,UAAA;IACAL,eAAA;IACA;IACAC,WAAA;IACAG;EACA;EACAE,KAAA;IACA;MACAC,cAAA;MACAC,cAAA,GACA;QAAAC,IAAA;QAAAC,EAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,EAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,EAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,EAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,EAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,EAAA;MAAA;IAEA;EACA;EACAC,OAAA;IACA,GAAAT,YAAA,cACA,iBACA,kBACA,kBACA;IACAU,iBAAAF,EAAA;MACA,IAAAA,EAAA,kBAAAA,EAAA;QACAA,EAAA;MACA;MACA,IAAAA,EAAA,mBAAAA,EAAA;QACAA,EAAA;MACA;MACA,KAAAG,KAAA,CAAAC,YAAA,CAAAA,YAAA;QAAAJ;MAAA;IACA;IACAK,iBAAA;MACA,KAAAF,KAAA,CAAAC,YAAA,CAAAE,YAAA;IACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACAC,QAAA;IACA,GAAAd,QAAA;IACAe,eAAA;MACA,IAAAC,IAAA,GAAAC,MAAA,CAAAC,IAAA,MAAAC,OAAA,EAAAC,MAAA,EAAAC,GAAA,EAAAC,GAAA;QACA,MAAAC,KAAA,QAAAJ,OAAA,CAAAG,GAAA;QACA,IAAAC,KAAA,WAAAA,KAAA,UAAAA,KAAA;UACAF,GAAA,CAAAC,GAAA,IAAAC,KAAA;QACA;QACA,OAAAF,GAAA;MACA;MAEA,IAAAG,SAAA,GAAAP,MAAA,CAAAC,IAAA,CAAAF,IAAA,EAAAS,GAAA,CAAAC,GAAA;QACA,MAAAC,KAAA,GAAAD,GAAA,CAAAC,KAAA;QACA,OAAAD,GAAA,CAAAE,KAAA,CAAAD,KAAA;MACA;MAEA,eAAAE,GAAA,CAAAL,SAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}