{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { required, email } from \"vuelidate/lib/validators\";\nimport { mapActions, mapMutations } from \"vuex\";\nexport default {\n  data() {\n    return {\n      user: {},\n      submitted: false\n    };\n  },\n  validations: {\n    user: {\n      email: {\n        required,\n        email\n      },\n      password: {\n        required\n      }\n    }\n  },\n  methods: {\n    ...mapActions(\"auth\", [\"signUp\", \"signIn\"]),\n    ...mapMutations(\"auth\", [\"SET_ALERT_MSG\", \"TOGGLE_IS_LOADING\"]),\n    ...mapActions(\"profile\", [\"createProfile\"]),\n    async tryToRegisterIn() {\n      this.TOGGLE_IS_LOADING();\n      this.submitted = true;\n      if (this.$v.$invalid) {\n        return;\n      } else {\n        try {\n          //after signup firebase sign user in automaticaly\n          const newUser = await this.signUp({\n            email: this.user.email,\n            password: this.user.password\n          });\n          await this.createProfile({\n            active: false,\n            email: this.user.email,\n            auth_id: newUser.uid\n          });\n          await this.signIn({\n            email: this.user.email,\n            password: this.user.password\n          });\n          this.$router.push({\n            name: \"dashboard\",\n            query: {\n              authId: newUser.uid\n            }\n          });\n        } catch (error) {\n          this.SET_ALERT_MSG({\n            type: \"error\",\n            title: \"Error\",\n            msg: error\n          });\n          console.log(error);\n        } finally {\n          this.TOGGLE_IS_LOADING();\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["required","email","mapActions","mapMutations","data","user","submitted","validations","password","methods","tryToRegisterIn","TOGGLE_IS_LOADING","$v","$invalid","newUser","signUp","createProfile","active","auth_id","uid","signIn","$router","push","name","query","authId","error","SET_ALERT_MSG","type","title","msg","console","log"],"sources":["src/views/authentication/register-page.vue"],"sourcesContent":["<script>\r\nimport { required, email } from \"vuelidate/lib/validators\";\r\nimport { mapActions, mapMutations } from \"vuex\";\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuser: {},\r\n\t\t\tsubmitted: false,\r\n\t\t};\r\n\t},\r\n\tvalidations: {\r\n\t\tuser: {\r\n\t\t\temail: { required, email },\r\n\t\t\tpassword: { required },\r\n\t\t},\r\n\t},\r\n\tmethods: {\r\n\t\t...mapActions(\"auth\", [\"signUp\", \"signIn\"]),\r\n\t\t...mapMutations(\"auth\", [\"SET_ALERT_MSG\",\"TOGGLE_IS_LOADING\"]),\r\n\t\t...mapActions(\"profile\", [\"createProfile\"]),\r\n\r\n\t\tasync tryToRegisterIn() {\r\n\t\t\tthis.TOGGLE_IS_LOADING()\r\n\t\t\tthis.submitted = true;\r\n\t\t\tif (this.$v.$invalid) {\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t//after signup firebase sign user in automaticaly\r\n\t\t\t\t\tconst newUser = await this.signUp({\r\n\t\t\t\t\t\temail: this.user.email,\r\n\t\t\t\t\t\tpassword: this.user.password,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.createProfile({\r\n\t\t\t\t\t\tactive: false,\r\n\t\t\t\t\t\temail: this.user.email,\r\n\t\t\t\t\t\tauth_id: newUser.uid,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.signIn({\r\n\t\t\t\t\t\temail: this.user.email,\r\n\t\t\t\t\t\tpassword: this.user.password,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\tname: \"dashboard\",\r\n\t\t\t\t\t\tquery: { authId: newUser.uid },\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tthis.SET_ALERT_MSG({ type: \"error\", title: \"Error\", msg: error });\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis.TOGGLE_IS_LOADING()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<template>\r\n\t<div>\r\n\t\t<form class=\"form\" @submit.prevent=\"tryToRegisterIn\">\r\n\t\t\t<div class=\"form-field-container form-field-size\">\r\n\t\t\t\t<label for=\"email\" class=\"form-label\">Email address</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\tv-model=\"user.email\"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder=\"Enter email\"\r\n\t\t\t\t\t:class=\"[\r\n\t\t\t\t\t\t'form-input',\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'is-invalid ':\r\n\t\t\t\t\t\t\t\tsubmitted && (!$v.user.email.required || !$v.user.email.email),\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]\"\r\n\t\t\t\t/>\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-if=\"submitted && !$v.user.email.required\"\r\n\t\t\t\t\tclass=\"invalid-feedback\"\r\n\t\t\t\t>\r\n\t\t\t\t\tEmail is required.\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-else-if=\"submitted && !$v.user.email.email\"\r\n\t\t\t\t\tclass=\"invalid-feedback\"\r\n\t\t\t\t>\r\n\t\t\t\t\tEnter a valid email.\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"form-field-container form-field-size\">\r\n\t\t\t\t<label for=\"input-2\" class=\"form-label\">Create password</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tid=\"input-2\"\r\n\t\t\t\t\tv-model=\"user.password\"\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tplaceholder=\"Enter password\"\r\n\t\t\t\t\t:class=\"[\r\n\t\t\t\t\t\t'form-input',\r\n\t\t\t\t\t\t{ 'is-invalid': submitted && !$v.user.password.required },\r\n\t\t\t\t\t]\"\r\n\t\t\t\t/>\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-if=\"submitted && !$v.user.password.required\"\r\n\t\t\t\t\tclass=\"invalid-feedback\"\r\n\t\t\t\t>\r\n\t\t\t\t\tPassword is required.\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"submit-btn\">\r\n\t\t\t\t<button type=\"submit\" class=\"btn\">Register</button>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t</div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.invalid-feedback {\r\n\tcolor: red;\r\n}\r\n.is-invalid {\r\n\tborder: 1px solid red;\r\n}\r\n.form {\r\n\tmargin: 1em;\r\n\t// height: 20em;\r\n}\r\n.form-label {\r\n\tfont: $font-text-bold;\r\n}\r\n.form-input {\r\n\theight: 3em;\r\n\tborder-radius: 5px;\r\n\tpadding-inline: 0.5em;\r\n\tfont: $font-text;\r\n}\r\n.form-field-container {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tmargin-bottom: 1em;\r\n\t//  font: $font-text;\r\n}\r\n\r\n.form {\r\n\t@include breakpoint(tablet) {\r\n\t\t.field-flex {\r\n\t\t\tdisplay: flex;\r\n\t\t\tgap: 1em;\r\n\t\t\tflex-wrap: wrap;\r\n\t\t}\r\n\t\t.form-field-size {\r\n\t\t\tflex: 1;\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n"],"mappings":";AACA,SAAAA,QAAA,EAAAC,KAAA;AACA,SAAAC,UAAA,EAAAC,YAAA;AAEA;EACAC,KAAA;IACA;MACAC,IAAA;MACAC,SAAA;IACA;EACA;EACAC,WAAA;IACAF,IAAA;MACAJ,KAAA;QAAAD,QAAA;QAAAC;MAAA;MACAO,QAAA;QAAAR;MAAA;IACA;EACA;EACAS,OAAA;IACA,GAAAP,UAAA;IACA,GAAAC,YAAA;IACA,GAAAD,UAAA;IAEA,MAAAQ,gBAAA;MACA,KAAAC,iBAAA;MACA,KAAAL,SAAA;MACA,SAAAM,EAAA,CAAAC,QAAA;QACA;MACA;QACA;UACA;UACA,MAAAC,OAAA,cAAAC,MAAA;YACAd,KAAA,OAAAI,IAAA,CAAAJ,KAAA;YACAO,QAAA,OAAAH,IAAA,CAAAG;UACA;UACA,WAAAQ,aAAA;YACAC,MAAA;YACAhB,KAAA,OAAAI,IAAA,CAAAJ,KAAA;YACAiB,OAAA,EAAAJ,OAAA,CAAAK;UACA;UACA,WAAAC,MAAA;YACAnB,KAAA,OAAAI,IAAA,CAAAJ,KAAA;YACAO,QAAA,OAAAH,IAAA,CAAAG;UACA;UAEA,KAAAa,OAAA,CAAAC,IAAA;YACAC,IAAA;YACAC,KAAA;cAAAC,MAAA,EAAAX,OAAA,CAAAK;YAAA;UACA;QAGA,SAAAO,KAAA;UACA,KAAAC,aAAA;YAAAC,IAAA;YAAAC,KAAA;YAAAC,GAAA,EAAAJ;UAAA;UACAK,OAAA,CAAAC,GAAA,CAAAN,KAAA;QACA;UACA,KAAAf,iBAAA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}